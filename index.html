<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Mine Muncher">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a0a1a">
  <title>Mine Muncher</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}
    html,body,#root{width:100%;height:100%;overflow:hidden;touch-action:manipulation}
    body{font-family:monospace;background:linear-gradient(180deg,#1a0a1a 0%,#2d1a2d 50%,#0d0d0d 100%)}
    @font-face{font-family:'Press Start 2P';src:url('https://fonts.gstatic.com/s/pressstart2p/v15/e3t4euO8T-267oIAQAu6jDQyK3nVivM.woff2') format('woff2');font-display:swap}
    @keyframes pulse{from{transform:scale(1);opacity:1}to{transform:scale(1.2);opacity:0.8}}
    @keyframes deathFlash{0%,100%{opacity:1}50%{opacity:0.3}}
    input{-webkit-user-select:text;user-select:text}
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script>
// ========== AMBIENT MINECRAFT-STYLE MUSIC ENGINE ==========
class AmbientMusic {
  constructor() {
    this.ctx = null;
    this.playing = false;
    this.vol = 0.25;
    this.masterGain = null;
    this.loopTimer = null;
  }

  init() {
    if (this.ctx) return;
    this.ctx = new (window.AudioContext || window.webkitAudioContext)();
    this.masterGain = this.ctx.createGain();
    this.masterGain.gain.value = this.vol;
    this.masterGain.connect(this.ctx.destination);
  }

  // Pentatonic scale notes for calm Minecraft feel
  note(n) {
    const freqs = [130.81, 146.83, 164.81, 196.00, 220.00, 261.63, 293.66, 329.63, 392.00, 440.00, 523.25, 587.33];
    return freqs[n % freqs.length];
  }

  playTone(freq, dur, delay, type = 'sine', volume = 0.12) {
    if (!this.ctx || !this.playing) return;
    const osc = this.ctx.createOscillator();
    const gain = this.ctx.createGain();
    osc.type = type;
    osc.frequency.value = freq;
    const t = this.ctx.currentTime + delay;
    gain.gain.setValueAtTime(0, t);
    gain.gain.linearRampToValueAtTime(volume, t + 0.4);
    gain.gain.linearRampToValueAtTime(volume * 0.7, t + dur * 0.6);
    gain.gain.linearRampToValueAtTime(0, t + dur);
    osc.connect(gain);
    gain.connect(this.masterGain);
    osc.start(t);
    osc.stop(t + dur);
  }

  playChord(notes, dur, delay) {
    notes.forEach((n, i) => this.playTone(this.note(n), dur, delay + i * 0.08, 'sine', 0.08));
  }

  playMelody(notes, dur, startDelay) {
    notes.forEach((n, i) => {
      if (n >= 0) this.playTone(this.note(n + 5), dur, startDelay + i * dur * 0.9, 'triangle', 0.06);
    });
  }

  ambientLoop() {
    if (!this.playing) return;
    
    // Calm chord progression (C - Am - F - G feel in pentatonic)
    const chords = [
      [0, 2, 4], [2, 4, 6], [0, 3, 5], [1, 4, 6]
    ];
    
    let t = 0;
    chords.forEach((ch, i) => {
      this.playChord(ch, 4.5, t);
      t += 3.5;
    });

    // Gentle random melody notes
    const melody = [];
    for (let i = 0; i < 8; i++) {
      melody.push(Math.random() > 0.3 ? Math.floor(Math.random() * 5) + 2 : -1);
    }
    this.playMelody(melody, 1.6, 0.5);

    // Add soft bass
    this.playTone(this.note(0) * 0.5, 6, 0, 'sine', 0.05);
    this.playTone(this.note(2) * 0.5, 6, 7, 'sine', 0.05);

    this.loopTimer = setTimeout(() => this.ambientLoop(), 14000);
  }

  start() {
    this.init();
    if (this.ctx.state === 'suspended') this.ctx.resume();
    this.playing = true;
    this.ambientLoop();
  }

  stop() {
    this.playing = false;
    if (this.loopTimer) clearTimeout(this.loopTimer);
  }

  toggle() {
    if (this.playing) this.stop(); else this.start();
    return this.playing;
  }
}

const music = new AmbientMusic();

// ========== GAME CODE ==========
const{useState:S,useEffect:E,useCallback:C,useRef:R}=React,h=React.createElement,CS=32,
TS={1:250,2:235,3:220,4:205,5:190,6:175,7:160,8:145,9:130,10:115},
W=1,D=2,P=3,Y=0,MW=17,MH=15,
DM=["ðŸ’€ Enderman got you!","ðŸ‰ Dragon strikes!","ðŸ‘¤ Villager's revenge!","ðŸ’€ You were slain!","âš¡ Too slow!","ðŸŽ® Try again!"],
LVL=[
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,2,2,1,2,2,1,2,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,2,1,2,1,0,0,0,1,2,1,2,1,2,1],[1,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,1],[1,2,1,2,1,2,1,0,0,0,1,2,1,2,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,2,2,1,2,2,1,2,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,2,2,1,1,1,2,2,1,2,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,2,2,1,2,1,0,0,0,1,2,1,2,2,2,1],[1,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,1],[1,2,2,2,1,2,1,0,0,0,1,2,1,2,2,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,2,1,2,2,1,1,1,2,2,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'dragon',x:8,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,1,3,1,3,1,2,2,2,2,2,1],[1,2,1,1,1,2,1,2,2,2,1,2,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,2,1,1,1,2,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,3,2,2,2,2,0,0,0,0,0,2,2,2,2,3,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,2,1,1,1,2,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,2,2,2,1,2,1,1,1,2,1],[1,2,2,2,2,2,1,3,1,3,1,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7},{type:'enderman',x:7,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,2,1,1,2,1,2,1,1,2,1,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,2,2,2,2,2,0,0,0,0,0,2,2,2,2,2,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,3,2,2,2,2,2,2,2,2,2,2,2,2,2,3,1],[1,2,1,1,2,1,1,2,1,2,1,1,2,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7},{type:'dragon',x:7,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,1,2,1,1,2,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,2,1,2,1,2,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,3,2,2,2,2,0,0,0,0,0,2,2,2,2,3,1],[1,1,1,2,1,2,1,0,0,0,1,2,1,2,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,2,1,2,1,2,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,1,2,1,1,2,1,1,1,2,1],[1,2,2,2,2,2,2,1,3,1,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7},{type:'enderman',x:7,y:7},{type:'dragon',x:9,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,3,1,1,2,1,1,2,1,2,1,1,2,1,1,3,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1],[1,1,1,2,1,1,1,0,0,0,1,1,1,2,1,1,1],[0,2,2,2,2,2,0,0,0,0,0,2,2,2,2,2,0],[1,1,1,2,1,1,1,0,0,0,1,1,1,2,1,1,1],[1,2,2,2,1,2,2,2,2,2,2,2,1,2,2,2,1],[1,2,1,2,1,2,1,1,1,1,1,2,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,3,1,1,2,1,1,2,1,2,1,1,2,1,1,3,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7},{type:'enderman',x:6,y:7},{type:'enderman',x:10,y:7},{type:'dragon',x:8,y:6}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,1,2,2,3,2,2,1,2,2,2,2,1],[1,2,1,1,2,1,2,1,1,1,2,1,2,1,1,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,2,2,1,1,2,1,2,1,2,1,1,2,2,2,1],[1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1],[1,2,2,2,1,1,1,0,0,0,1,1,1,2,2,2,1],[1,3,1,2,1,0,0,0,0,0,0,0,1,2,1,3,1],[1,2,2,2,1,1,1,0,0,0,1,1,1,2,2,2,1],[1,1,1,2,2,2,2,2,2,2,2,2,2,2,1,1,1],[1,2,2,2,1,1,2,1,2,1,2,1,1,2,2,2,1],[1,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,1],[1,2,1,1,2,1,2,1,1,1,2,1,2,1,1,2,1],[1,2,2,2,2,1,2,2,3,2,2,1,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'villager',x:8,y:7},{type:'enderman',x:6,y:7},{type:'enderman',x:10,y:7},{type:'dragon',x:7,y:7},{type:'dragon',x:9,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1],[1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1],[1,2,1,2,1,1,2,1,2,1,2,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,2,1,0,0,0,1,2,1,1,1,1,1],[0,2,2,2,2,2,0,0,0,0,0,2,2,2,2,2,0],[1,1,1,1,1,2,1,0,0,0,1,2,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,2,1,2,1,2,1,1,2,1,2,1],[1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1],[1,2,1,1,1,2,1,1,1,1,1,2,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'enderman',x:5,y:7},{type:'enderman',x:11,y:7},{type:'dragon',x:7,y:7},{type:'dragon',x:8,y:7},{type:'dragon',x:9,y:7}],start:{x:1,y:1}},
{map:[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,1,1,1,2,1,1,1,2,1,1,1,1,2,1],[1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1],[1,2,1,2,1,1,1,2,1,2,1,1,1,2,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,2,1,0,0,0,1,2,1,1,1,1,1],[0,2,2,2,2,2,0,0,0,0,0,2,2,2,2,2,0],[1,1,1,1,1,2,1,0,0,0,1,2,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,1,2,1,1,1,2,1,2,1,1,1,2,1,2,1],[1,3,1,2,2,2,2,2,2,2,2,2,2,2,1,3,1],[1,2,1,1,1,1,2,1,1,1,2,1,1,1,1,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],enemies:[{type:'dragon',x:6,y:7},{type:'dragon',x:7,y:7},{type:'dragon',x:8,y:7},{type:'dragon',x:9,y:7},{type:'dragon',x:10,y:7}],start:{x:1,y:1}}
];

function Game(){
const[cl,sCl]=S(0),[sl,sSl]=S(1),[gm,sGm]=S([]),[st,sSt]=S({x:1,y:1}),[sd,sSd]=S({x:0,y:0}),[en,sEn]=S([]),[sc,sSc]=S(0),[lv,sLv]=S(3),[go,sGo]=S(!1),[gs,sGs]=S(!1),[ip,sIp]=S(!1),[pm,sPm]=S(!1),[pt,sPt]=S(null),[mo,sMo]=S(!0),[sr,sSr]=S(!1),[sl2,sSl2]=S(!1),[sn,sSn]=S(!1),[pn,sPn]=S(''),[ps,sPs]=S(0),[wt,sWt]=S(!0),[shd,sShd]=S(!1),[dm,sDm]=S(''),[mOn,sMOn]=S(!1),
[lb,sLb]=S(()=>{try{return JSON.parse(localStorage.getItem('mm-lb'))||[]}catch{return[]}});
const tsR=R({x:0,y:0}),ndR=R({x:0,y:0}),sdR=R({x:0,y:0}),niR=R(null);

const tglM=()=>{const p=music.toggle();sMOn(p)};
const chkLb=C(fs=>{if(lb.length<10||fs>(lb[lb.length-1]?.score||0)){sPs(fs);sSn(!0);setTimeout(()=>niR.current?.focus(),100);return!0}return!1},[lb]);
const savLb=C((n,s)=>{const ne={name:n.trim()||'Anon',score:s,date:new Date().toLocaleDateString()};const nl=[...lb,ne].sort((a,b)=>b.score-a.score).slice(0,10);sLb(nl);localStorage.setItem('mm-lb',JSON.stringify(nl));sSn(!1);sPn('')},[lb]);
const initL=C((i,rp=!1)=>{const l=LVL[i];if(!rp)sGm(l.map.map(r=>[...r]));sSt({...l.start});sSd({x:0,y:0});sdR.current={x:0,y:0};ndR.current={x:0,y:0};sEn(l.enemies.map((x,j)=>({...x,sx:x.x,sy:x.y,id:j,sc:!1,dir:{x:0,y:0}})));sPm(!1);sWt(!0);if(pt)clearTimeout(pt)},[pt]);
const stG=(l=sl)=>{sCl(l-1);sSc(0);sLv(3);sGo(!1);sGs(!0);sIp(!1);sSr(!1);sSl2(!1);sShd(!1);initL(l-1);if(!mOn){music.start();sMOn(!0)}};
const stR=()=>{sWt(!1);sShd(!1)};
const isV=C((x,y,m)=>{if(y<0||y>=MH)return!1;return m[y][(x+MW)%MW]!==W},[]);
const cntD=C(m=>m.flat().filter(c=>c===D||c===P).length,[]);
const hDir=C(d=>{if(!gs||go||ip||wt)return;ndR.current=d},[gs,go,ip,wt]);
const hTS=ev=>{if(!gs||go)return;tsR.current={x:ev.touches[0].clientX,y:ev.touches[0].clientY}};
const hTE=ev=>{if(!gs||go||ip||wt)return;const dx=ev.changedTouches[0].clientX-tsR.current.x,dy=ev.changedTouches[0].clientY-tsR.current.y;if(Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>30)hDir(dx>0?{x:1,y:0}:{x:-1,y:0});else if(Math.abs(dy)>30)hDir(dy>0?{x:0,y:1}:{x:0,y:-1})};

E(()=>{const onK=ev=>{if(sn)return;if(ev.key==='Enter'||ev.key===' '){ev.preventDefault();if(!gs)stG();else if(wt&&!go)stR();else if(go)stG();return}if(ev.key==='Escape'){ev.preventDefault();if(sr)sSr(!1);else if(sl2)sSl2(!1);else if(gs&&!go&&!wt)sIp(p=>!p);return}if((ev.key==='p'||ev.key==='P')&&gs&&!go&&!wt){ev.preventDefault();sIp(p=>!p);return}if(ev.key==='m'||ev.key==='M'){ev.preventDefault();tglM();return}const dirs={ArrowUp:{x:0,y:-1},w:{x:0,y:-1},ArrowDown:{x:0,y:1},s:{x:0,y:1},ArrowLeft:{x:-1,y:0},a:{x:-1,y:0},ArrowRight:{x:1,y:0},d:{x:1,y:0}};if(dirs[ev.key]){ev.preventDefault();hDir(dirs[ev.key])}};window.addEventListener('keydown',onK);return()=>window.removeEventListener('keydown',onK)},[gs,go,hDir,sr,sl2,sn,wt,mOn]);

const mvEn=C((m,sp,cpm)=>{sEn(pr=>pr.map(x=>{const ds=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}];const vd=ds.filter(d=>{const nx=(x.x+d.x+MW)%MW,ny=x.y+d.y;return isV(nx,ny,m)&&!(d.x===-x.dir.x&&d.y===-x.dir.y)});if(vd.length===0){const any=ds.filter(d=>isV((x.x+d.x+MW)%MW,x.y+d.y,m));if(any.length===0)return x;const d=any[Math.floor(Math.random()*any.length)];return{...x,x:(x.x+d.x+MW)%MW,y:x.y+d.y,dir:d,sc:cpm}}let ch;if(cpm){vd.sort((a,b)=>{const dA=Math.abs(x.x+a.x-sp.x)+Math.abs(x.y+a.y-sp.y),dB=Math.abs(x.x+b.x-sp.x)+Math.abs(x.y+b.y-sp.y);return dB-dA});ch=vd[0]}else{if(Math.random()<0.7){vd.sort((a,b)=>{const dA=Math.abs(x.x+a.x-sp.x)+Math.abs(x.y+a.y-sp.y),dB=Math.abs(x.x+b.x-sp.x)+Math.abs(x.y+b.y-sp.y);return dA-dB});ch=vd[0]}else ch=vd[Math.floor(Math.random()*vd.length)]}return{...x,x:(x.x+ch.x+MW)%MW,y:x.y+ch.y,dir:ch,sc:cpm}}))},[isV]);

E(()=>{if(!gs||go||ip||wt)return;const sp=TS[sl]||200;const lp=setInterval(()=>{sMo(m=>!m);sSt(pr=>{let nd=sdR.current;const tx=(pr.x+ndR.current.x+MW)%MW,ty=pr.y+ndR.current.y;if((ndR.current.x||ndR.current.y)&&isV(tx,ty,gm)){nd=ndR.current;sdR.current=nd;sSd(nd)}const nx=(pr.x+nd.x+MW)%MW,ny=pr.y+nd.y;if(!isV(nx,ny,gm))return pr;if(gm[ny][nx]===D){sGm(m=>{const nm=m.map(r=>[...r]);nm[ny][nx]=Y;return nm});sSc(s=>s+10)}if(gm[ny][nx]===P){sGm(m=>{const nm=m.map(r=>[...r]);nm[ny][nx]=Y;return nm});sSc(s=>s+50);sPm(!0);if(pt)clearTimeout(pt);sPt(setTimeout(()=>sPm(!1),8000))}return{x:nx,y:ny}});if(Math.random()<0.6)mvEn(gm,st,pm)},sp);return()=>clearInterval(lp)},[gs,go,ip,wt,gm,st,pm,isV,mvEn,sl,pt]);

E(()=>{if(!gs||go||wt)return;for(const x of en){if(x.x===st.x&&x.y===st.y){if(pm){sSc(s=>s+200);sEn(p=>p.map(z=>z.id===x.id?{...z,x:z.sx,y:z.sy}:z))}else{sLv(l=>{const nl=l-1;if(nl<=0){sGo(!0);chkLb(sc)}else{sDm(DM[Math.floor(Math.random()*DM.length)]);sShd(!0);initL(cl,!0)}return nl})}}}}if(cntD(gm)===0){const nx=cl+1;if(nx<LVL.length){sCl(nx);initL(nx)}else{const fs=sc+1000;sGo(!0);sSc(fs);chkLb(fs)}}},[st,en,gm,pm,gs,go,wt,cl,initL,cntD,sc,chkLb]);

const rSt=()=>{const rt=sd.x===1?0:sd.x===-1?180:sd.y===1?90:sd.y===-1?-90:0;return h('div',{style:{position:'absolute',left:st.x*CS,top:st.y*CS,width:CS,height:CS,transition:'left 0.1s,top 0.1s',zIndex:10}},h('div',{style:{width:CS-4,height:CS-4,margin:2,background:'#c69c6d',border:'2px solid #8b6914',borderRadius:2,position:'relative',transform:`rotate(${rt}deg)`,boxShadow:'inset 2px 2px 0 rgba(255,255,255,0.3)'}},[h('div',{key:'h',style:{position:'absolute',top:0,left:0,right:0,height:'35%',background:'#3b2210',borderRadius:'2px 2px 0 0'}}),h('div',{key:'e1',style:{position:'absolute',top:'40%',left:'15%',width:'20%',height:'20%',background:'#fff'}},h('div',{style:{position:'absolute',right:0,top:0,width:'50%',height:'100%',background:'#4a7ebf'}})),h('div',{key:'e2',style:{position:'absolute',top:'40%',right:'15%',width:'20%',height:'20%',background:'#fff'}},h('div',{style:{position:'absolute',left:0,top:0,width:'50%',height:'100%',background:'#4a7ebf'}})),h('div',{key:'m',style:{position:'absolute',bottom:'15%',left:'30%',width:mo?'40%':'20%',height:'15%',background:'#8b6914',transition:'width 0.1s'}})]))};

const rEn=x=>{const sc=pm;const sty=x.type==='enderman'?{bg:sc?'#4444ff':'#161616',ey:sc?'#fff':'#ff00ff',ac:'#2a0a2a'}:x.type==='dragon'?{bg:sc?'#4444ff':'#1a1a2e',ey:sc?'#fff':'#ff00ff',ac:'#3d1a5c'}:{bg:sc?'#4444ff':'#8b7355',ey:sc?'#fff':'#3d5c3d',ac:'#5c4a32'};const ch=[];if(x.type==='enderman'){ch.push(h('div',{key:'a',style:{position:'absolute',top:'30%',left:'15%',width:'25%',height:'15%',background:sty.ey}}));ch.push(h('div',{key:'b',style:{position:'absolute',top:'30%',right:'15%',width:'25%',height:'15%',background:sty.ey}}))}if(x.type==='dragon'){ch.push(h('div',{key:'a',style:{position:'absolute',top:'25%',left:'10%',width:'30%',height:'25%',background:sty.ey,borderRadius:'50%'}}));ch.push(h('div',{key:'b',style:{position:'absolute',top:'25%',right:'10%',width:'30%',height:'25%',background:sty.ey,borderRadius:'50%'}}));ch.push(h('div',{key:'c',style:{position:'absolute',top:-5,left:'20%',width:5,height:7,background:'#1a1a2e',transform:'rotate(-20deg)'}}));ch.push(h('div',{key:'d',style:{position:'absolute',top:-5,right:'20%',width:5,height:7,background:'#1a1a2e',transform:'rotate(20deg)'}}))}if(x.type==='villager'){ch.push(h('div',{key:'n',style:{position:'absolute',top:'35%',left:'35%',width:'30%',height:'40%',background:'#c69c6d',borderRadius:2}}));ch.push(h('div',{key:'a',style:{position:'absolute',top:'35%',left:'15%',width:'15%',height:'15%',background:sty.ey}}));ch.push(h('div',{key:'b',style:{position:'absolute',top:'35%',right:'15%',width:'15%',height:'15%',background:sty.ey}}));ch.push(h('div',{key:'c',style:{position:'absolute',top:'25%',left:'10%',width:'25%',height:'8%',background:'#3b2210'}}));ch.push(h('div',{key:'d',style:{position:'absolute',top:'25%',right:'10%',width:'25%',height:'8%',background:'#3b2210'}}))}return h('div',{key:x.id,style:{position:'absolute',left:x.x*CS,top:x.y*CS,width:CS,height:CS,transition:'left 0.15s,top 0.15s',zIndex:5}},h('div',{style:{width:CS-4,height:CS-4,margin:2,background:sty.bg,border:`2px solid ${sty.ac}`,borderRadius:x.type==='villager'?'4px 4px 2px 2px':2,position:'relative',boxShadow:sc?'0 0 10px #00f':'none'}},ch))};

const rCl=(c,x,y)=>{const isW=c===W;const ch=[];if(c===D)ch.push(h('div',{key:'d',style:{width:8,height:8,background:'radial-gradient(circle,#50c878 0%,#228b22 100%)',borderRadius:'50%',boxShadow:'0 0 5px rgba(80,200,120,0.5)'}}));if(c===P)ch.push(h('div',{key:'p',style:{width:16,height:16,background:'radial-gradient(circle,#ffd700 0%,#daa520 100%)',borderRadius:'50%',boxShadow:'0 0 10px rgba(255,215,0,0.8)',animation:'pulse 0.5s ease-in-out infinite alternate'}}));return h('div',{key:`${x}-${y}`,style:{position:'absolute',left:x*CS,top:y*CS,width:CS,height:CS,background:isW?'linear-gradient(135deg,#1a472a 0%,#0d2818 100%)':'linear-gradient(135deg,#2d1810 0%,#1a0f0a 100%)',boxShadow:isW?'inset 2px 2px 0 rgba(255,255,255,0.1),inset -2px -2px 0 rgba(0,0,0,0.3)':'inset 1px 1px 0 rgba(0,0,0,0.3)',display:'flex',alignItems:'center',justifyContent:'center'}},ch)};

const CB=({dir,sym,sz=64})=>h('button',{onTouchStart:ev=>{ev.preventDefault();ev.stopPropagation();hDir(dir)},onMouseDown:ev=>{ev.preventDefault();hDir(dir)},style:{width:sz,height:sz,fontSize:sz*0.4,fontFamily:'"Press Start 2P",monospace',background:'linear-gradient(180deg,#4a6741 0%,#3d5735 50%,#2d4025 100%)',border:'4px outset #5a7a51',borderRadius:12,color:'#fff',textShadow:'2px 2px 0 #1a2a15',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',touchAction:'manipulation',userSelect:'none',outline:'none',opacity:wt?0.5:1}},sym);

const LB=({lv:l,sel,onClick})=>h('button',{onClick,style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,width:40,height:40,background:sel?'linear-gradient(180deg,#50c878 0%,#228b22 100%)':'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:sel?'3px solid #166534':'3px solid #374151',borderRadius:8,color:'#fff',cursor:'pointer'}},l);

return h('div',{onTouchStart:hTS,onTouchEnd:hTE,style:{minHeight:'100vh',background:'linear-gradient(180deg,#1a0a1a 0%,#2d1a2d 50%,#0d0d0d 100%)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'flex-start',padding:'10px 20px',fontFamily:'monospace',overflow:'hidden',touchAction:'manipulation'}},[
sr&&h('div',{key:'rules',style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.95)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:20}},h('div',{style:{background:'linear-gradient(180deg,#2d1a2d 0%,#1a0a1a 100%)',border:'4px solid #50c878',borderRadius:16,padding:24,maxWidth:550,maxHeight:'85vh',overflow:'auto'}},[h('h2',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:14,color:'#50c878',marginBottom:16,textAlign:'center'}},'ðŸ“œ HOW TO PLAY'),h('div',{key:'c',style:{fontFamily:'"Press Start 2P",monospace',fontSize:8,color:'#fff',lineHeight:2.2}},[h('p',{key:'1'},'ðŸŽ¯ Collect all emeralds!'),h('p',{key:'2',style:{color:'#ffd700',marginTop:8}},'ðŸŽ Golden Apple = Power Mode'),h('p',{key:'3'},'Mobs turn blue - eat them!'),h('p',{key:'4',style:{marginTop:8}},'ðŸ’Ž Emerald: 10pts'),h('p',{key:'5'},'ðŸŽ Apple: 50pts'),h('p',{key:'6'},'ðŸ‘» Eat mob: 200pts'),h('p',{key:'7',style:{color:'#4ee4fc',marginTop:8}},'ðŸŽ® Press GO each round'),h('p',{key:'8'},'ðŸ”Š Press M for music')]),h('button',{key:'b',onClick:()=>sSr(!1),style:{display:'block',margin:'16px auto 0',fontFamily:'"Press Start 2P",monospace',fontSize:11,padding:'10px 20px',background:'linear-gradient(180deg,#50c878 0%,#228b22 100%)',border:'4px solid #166534',borderRadius:8,color:'#fff',cursor:'pointer'}},'GOT IT!')])),
sl2&&h('div',{key:'lb',style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.95)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:20}},h('div',{style:{background:'linear-gradient(180deg,#2d1a2d 0%,#1a0a1a 100%)',border:'4px solid #ffd700',borderRadius:16,padding:24,minWidth:320}},[h('h2',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,color:'#ffd700',marginBottom:16,textAlign:'center'}},'ðŸ† TOP 10 SCORES'),lb.length===0?h('p',{key:'e',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:'#888',textAlign:'center',padding:16}},'No scores yet!'):h('div',{key:'l',style:{marginBottom:16}},lb.map((x,i)=>h('div',{key:i,style:{display:'flex',justifyContent:'space-between',padding:'6px 10px',background:i===0?'rgba(255,215,0,0.2)':i===1?'rgba(192,192,192,0.2)':i===2?'rgba(205,127,50,0.2)':'transparent',borderRadius:4,marginBottom:3}},[h('span',{key:'n',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:i<3?'#ffd700':'#fff'}},`${i+1}. ${x.name}`),h('span',{key:'s',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:'#50c878'}},x.score)]))),h('button',{key:'b',onClick:()=>sSl2(!1),style:{display:'block',margin:'0 auto',fontFamily:'"Press Start 2P",monospace',fontSize:11,padding:'10px 20px',background:'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:'4px solid #374151',borderRadius:8,color:'#fff',cursor:'pointer'}},'CLOSE')])),
sn&&h('div',{key:'ne',style:{position:'fixed',inset:0,background:'rgba(0,0,0,0.95)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:20}},h('div',{style:{background:'linear-gradient(180deg,#2d1a2d 0%,#1a0a1a 100%)',border:'4px solid #50c878',borderRadius:16,padding:24,textAlign:'center'}},[h('h2',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,color:'#ffd700',marginBottom:8}},'ðŸŽ‰ HIGH SCORE!'),h('p',{key:'s',style:{fontFamily:'"Press Start 2P",monospace',fontSize:16,color:'#50c878',marginBottom:16}},`${ps} pts`),h('input',{key:'i',ref:niR,type:'text',value:pn,onChange:ev=>sPn(ev.target.value.slice(0,12)),onKeyDown:ev=>{if(ev.key==='Enter')savLb(pn,ps)},placeholder:'Your name',maxLength:12,style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,padding:'10px 14px',background:'#1a0a1a',border:'3px solid #50c878',borderRadius:8,color:'#fff',textAlign:'center',width:180,marginBottom:16,outline:'none'}}),h('br',{key:'br'}),h('button',{key:'b',onClick:()=>savLb(pn,ps),style:{fontFamily:'"Press Start 2P",monospace',fontSize:11,padding:'10px 20px',background:'linear-gradient(180deg,#50c878 0%,#228b22 100%)',border:'4px solid #166534',borderRadius:8,color:'#fff',cursor:'pointer'}},'SAVE')])),
h('div',{key:'hdr',style:{display:'flex',alignItems:'center',gap:12,marginBottom:8,flexWrap:'wrap',justifyContent:'center'}},[h('div',{key:'ttl',style:{background:'linear-gradient(180deg,#2d4025 0%,#1a2a15 100%)',border:'4px solid #0d1a08',borderRadius:8,padding:'8px 16px',boxShadow:'4px 4px 0 rgba(0,0,0,0.6)'}},h('h1',{style:{fontFamily:'"Press Start 2P",monospace',fontSize:14,color:'#50c878',textShadow:'3px 3px 0 #0d1a08',margin:0}},'â›ï¸ MINE MUNCHER â›ï¸')),h('div',{key:'sc',style:{display:'flex',gap:8,flexWrap:'wrap',justifyContent:'center'}},[h('div',{key:'s1',style:{background:'linear-gradient(180deg,#3d2817 0%,#2a1a0f 100%)',border:'3px solid #1a0f08',borderRadius:6,padding:'6px 12px'}},h('span',{style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,color:'#50c878'}},`SCORE: ${sc}`)),h('div',{key:'s2',style:{background:'linear-gradient(180deg,#3d2817 0%,#2a1a0f 100%)',border:'3px solid #1a0f08',borderRadius:6,padding:'6px 12px'}},h('span',{style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,color:'#ff6b6b'}},'â¤ï¸'.repeat(lv))),h('div',{key:'s3',style:{background:'linear-gradient(180deg,#3d2817 0%,#2a1a0f 100%)',border:'3px solid #1a0f08',borderRadius:6,padding:'6px 12px'}},h('span',{style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,color:'#4ee4fc'}},`LVL: ${cl+1}/10`))]),h('div',{key:'btns',style:{display:'flex',gap:6}},[h('button',{key:'r',onClick:()=>sSr(!0),style:{fontFamily:'"Press Start 2P",monospace',fontSize:8,padding:'6px 10px',background:'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:'3px solid #374151',borderRadius:6,color:'#fff',cursor:'pointer'}},'ðŸ“œ'),h('button',{key:'l',onClick:()=>sSl2(!0),style:{fontFamily:'"Press Start 2P",monospace',fontSize:8,padding:'6px 10px',background:'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:'3px solid #374151',borderRadius:6,color:'#fff',cursor:'pointer'}},'ðŸ†'),h('button',{key:'m',onClick:tglM,style:{fontFamily:'"Press Start 2P",monospace',fontSize:8,padding:'6px 10px',background:mOn?'linear-gradient(180deg,#50c878 0%,#228b22 100%)':'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:mOn?'3px solid #166534':'3px solid #374151',borderRadius:6,color:'#fff',cursor:'pointer'}},mOn?'ðŸ”Š':'ðŸ”‡')])]),
pm&&h('div',{key:'pm',style:{background:'linear-gradient(180deg,#ffd700 0%,#daa520 100%)',border:'3px solid #b8860b',borderRadius:6,padding:'6px 16px',marginBottom:6,animation:'pulse 0.3s ease-in-out infinite alternate'}},h('span',{style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,color:'#000'}},'âš¡ POWER MODE! âš¡')),
h('div',{key:'ga',style:{display:'flex',flexDirection:'column',alignItems:'center'}},[h('div',{key:'bd',style:{position:'relative',width:MW*CS,height:MH*CS,border:'6px solid #1a472a',borderRadius:4,boxShadow:'0 8px 32px rgba(0,0,0,0.6),inset 0 0 30px rgba(0,0,0,0.4)',overflow:'hidden',background:'#0d0d0d'}},[...gm.flatMap((r,y)=>r.map((c,x)=>rCl(c,x,y))),...en.map(x=>rEn(x)),gs&&!go&&rSt(),
!gs&&h('div',{key:'st',style:{position:'absolute',inset:0,background:'rgba(0,0,0,0.95)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:12,padding:20}},[h('div',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:16,color:'#50c878',textShadow:'2px 2px 0 #000'}},'MINE MUNCHER'),h('div',{key:'h1',style:{fontFamily:'"Press Start 2P",monospace',fontSize:8,color:'#ffd700'}},'ðŸŽµ Tap ðŸ”Š for music!'),h('div',{key:'l',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:'#aaa',marginTop:8}},'Select Level'),h('div',{key:'lvs',style:{display:'flex',gap:6,flexWrap:'wrap',justifyContent:'center'}},[1,2,3,4,5,6,7,8,9,10].map(l=>h(LB,{key:l,lv:l,sel:sl===l,onClick:()=>sSl(l)}))),h('div',{key:'h',style:{fontFamily:'"Press Start 2P",monospace',fontSize:7,color:'#666'}},'1-3=Easy | 4-6=Med | 7-10=Hard'),h('button',{key:'b',onClick:()=>stG(sl),style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,padding:'12px 24px',background:'linear-gradient(180deg,#50c878 0%,#228b22 100%)',border:'4px solid #166534',borderRadius:8,color:'#fff',cursor:'pointer',marginTop:8}},'START')]),
gs&&!go&&wt&&h('div',{key:'wt',style:{position:'absolute',inset:0,background:'rgba(0,0,0,0.85)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:15}},[shd&&h('div',{key:'dm',style:{fontFamily:'"Press Start 2P",monospace',fontSize:14,color:'#ff6b6b',textShadow:'2px 2px 0 #000',animation:'deathFlash 0.5s ease-in-out 3',marginBottom:10}},dm),h('div',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,color:'#ffd700',textShadow:'2px 2px 0 #000'}},shd?`Lives: ${'â¤ï¸'.repeat(lv)}`:`LEVEL ${cl+1}`),h('div',{key:'h',style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,color:'#aaa'}},shd?'Press GO':'Get Ready!'),h('button',{key:'b',onClick:stR,style:{fontFamily:'"Press Start 2P",monospace',fontSize:14,padding:'14px 32px',background:'linear-gradient(180deg,#50c878 0%,#228b22 100%)',border:'4px solid #166534',borderRadius:8,color:'#fff',cursor:'pointer',boxShadow:'4px 4px 0 rgba(0,0,0,0.4)'}},'â–¶ GO!')]),
go&&!sn&&h('div',{key:'go',style:{position:'absolute',inset:0,background:'rgba(0,0,0,0.95)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:12}},[h('div',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:18,color:lv>0?'#50c878':'#ff6b6b',textShadow:'2px 2px 0 #000'}},lv>0?'ðŸ† YOU WIN!':'ðŸ’€ GAME OVER'),h('div',{key:'s',style:{fontFamily:'"Press Start 2P",monospace',fontSize:14,color:'#ffd700'}},`Score: ${sc}`),h('div',{key:'l',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:'#aaa',marginTop:8}},'Select Level'),h('div',{key:'lvs',style:{display:'flex',gap:5,flexWrap:'wrap',justifyContent:'center'}},[1,2,3,4,5,6,7,8,9,10].map(l=>h(LB,{key:l,lv:l,sel:sl===l,onClick:()=>sSl(l)}))),h('button',{key:'b',onClick:()=>stG(sl),style:{fontFamily:'"Press Start 2P",monospace',fontSize:12,padding:'12px 24px',background:'linear-gradient(180deg,#50c878 0%,#228b22 100%)',border:'4px solid #166534',borderRadius:8,color:'#fff',cursor:'pointer'}},lv>0?'PLAY AGAIN':'RETRY')]),
ip&&!go&&h('div',{key:'pa',style:{position:'absolute',inset:0,background:'rgba(0,0,0,0.85)',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',gap:15}},[h('div',{key:'t',style:{fontFamily:'"Press Start 2P",monospace',fontSize:20,color:'#ffd700',textShadow:'2px 2px 0 #000'}},'PAUSED'),h('div',{key:'h',style:{fontFamily:'"Press Start 2P",monospace',fontSize:9,color:'#aaa'}},'Press P to resume')])]),
h('div',{key:'ctrl',style:{display:'flex',justifyContent:'space-between',width:MW*CS,marginTop:15,paddingLeft:10,paddingRight:10}},[h('div',{key:'lc',style:{display:'flex',gap:10}},[h(CB,{key:'l',dir:{x:-1,y:0},sym:'â—€'}),h(CB,{key:'r',dir:{x:1,y:0},sym:'â–¶'})]),gs&&!go&&!wt&&h('button',{key:'pa',onClick:()=>sIp(p=>!p),style:{fontFamily:'"Press Start 2P",monospace',fontSize:10,padding:'10px 20px',background:'linear-gradient(180deg,#6b7280 0%,#4b5563 100%)',border:'3px solid #374151',borderRadius:6,color:'#fff',cursor:'pointer'}},ip?'RESUME':'PAUSE'),h('div',{key:'rc',style:{display:'flex',gap:10}},[h(CB,{key:'u',dir:{x:0,y:-1},sym:'â–²'}),h(CB,{key:'d',dir:{x:0,y:1},sym:'â–¼'})])])])
])}
ReactDOM.createRoot(document.getElementById('root')).render(h(Game));
if('serviceWorker'in navigator)window.addEventListener('load',()=>navigator.serviceWorker.register('sw.js').catch(()=>{}));
  </script>
</body>
</html>
